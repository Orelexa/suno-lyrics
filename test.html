<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suno Lyrics - Teszt K√∂rnyezet</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: #e0e0e0;
        }

        h1 {
            color: #4CAF50;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }

        .section {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #3a3a3a;
        }

        .button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: background 0.3s;
        }

        .button:hover {
            background: #45a049;
        }

        .button.secondary {
            background: #2196F3;
        }

        .button.secondary:hover {
            background: #0b7dda;
        }

        #console {
            background: #1e1e1e;
            border: 1px solid #3a3a3a;
            border-radius: 5px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .log-success { color: #4CAF50; }
        .log-error { color: #f44336; }
        .log-info { color: #2196F3; }
        .log-warning { color: #ff9800; }

        .status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: bold;
        }

        .status.running { background: #ff9800; color: white; }
        .status.success { background: #4CAF50; color: white; }
        .status.failed { background: #f44336; color: white; }

        iframe {
            width: 100%;
            height: 600px;
            border: 2px solid #3a3a3a;
            border-radius: 5px;
            background: white;
        }

        .instruction {
            background: #263238;
            border-left: 4px solid #4CAF50;
            padding: 15px;
            margin: 15px 0;
        }

        code {
            background: #1e1e1e;
            padding: 2px 6px;
            border-radius: 3px;
            color: #4CAF50;
        }
    </style>
</head>
<body>
    <h1>üß™ Suno Lyrics Manager - Tesztel√©si K√∂rnyezet</h1>

    <div class="section">
        <h2>Teszt √Ållapot: <span class="status" id="status">K√©szenl√©ti</span></h2>
        <p>Ez a tesztel√©si k√∂rnyezet seg√≠t automatiz√°ltan tesztelni a Gener√°l√°s funkci√≥t.</p>
    </div>

    <div class="section">
        <h2>üìã Tesztel√©si Opci√≥k</h2>

        <h3>Automatikus Tesztek</h3>
        <button class="button" onclick="runAllTestsInIframe()">‚ñ∂Ô∏è √ñsszes Teszt Futtat√°sa</button>
        <button class="button secondary" onclick="clearConsole()">üóëÔ∏è Konzol T√∂rl√©se</button>

        <h3>Egyedi Tesztek</h3>
        <button class="button secondary" onclick="runIndividualTest(1)">Teszt 1: Modal Megnyit√°s</button>
        <button class="button secondary" onclick="runIndividualTest(2)">Teszt 2: Modal Bez√°r√°s</button>
        <button class="button secondary" onclick="runIndividualTest(3)">Teszt 3: Input Valid√°ci√≥</button>
        <button class="button secondary" onclick="runIndividualTest(4)">Teszt 4: API El√©rhet≈ës√©g</button>
        <button class="button secondary" onclick="runIndividualTest(5)">Teszt 5: Event Listeners</button>
        <button class="button secondary" onclick="runIndividualTest(6)">Teszt 6: Gener√°l√°s Folyamat</button>

        <h3>Manu√°lis Tesztel√©s</h3>
        <button class="button secondary" onclick="openApp()">üöÄ Alkalmaz√°s Megnyit√°sa √öj Ablakban</button>
    </div>

    <div class="section">
        <h2>üìä Teszt Konzol</h2>
        <div id="console"></div>
    </div>

    <div class="section">
        <h2>üìö Tesztel√©si √ötmutat√≥</h2>
        <div class="instruction">
            <h3>Automatikus Tesztel√©s</h3>
            <ol>
                <li>Kattints az <strong>"√ñsszes Teszt Futtat√°sa"</strong> gombra</li>
                <li>V√°rd meg, am√≠g az √∂sszes teszt lefut</li>
                <li>Ellen≈ërizd az eredm√©nyeket a teszt konzolban</li>
            </ol>
        </div>

        <div class="instruction">
            <h3>Manu√°lis Tesztel√©s</h3>
            <ol>
                <li>Nyisd meg az alkalmaz√°st: <code>http://localhost:8000</code></li>
                <li>Jelentkezz be vagy regisztr√°lj</li>
                <li>Kattints a <strong>"Gener√°l√°s"</strong> gombra</li>
                <li>T√∂ltsd ki a mez≈ëket:
                    <ul>
                        <li>T√©ma: pl. "szerelem √©s szabads√°g"</li>
                        <li>St√≠lus: pl. "pop rock"</li>
                        <li>Hangulat: pl. "energikus"</li>
                    </ul>
                </li>
                <li>Kattints a "Gener√°l√°s" gombra a modalban</li>
                <li>V√°rj az eredm√©nyre</li>
                <li>Ellen≈ërizd, hogy a dalsz√∂veg megjelent-e</li>
            </ol>
        </div>

        <div class="instruction">
            <h3>‚ö†Ô∏è Fontos Megjegyz√©sek</h3>
            <ul>
                <li>Az API kulcs be√°ll√≠t√°sa sz√ºks√©ges a t√©nyleges gener√°l√°shoz</li>
                <li>PocketBase autentik√°ci√≥ sz√ºks√©ges a teljes funkcionalit√°shoz</li>
                <li>A Netlify function-nek el√©rhet≈ënek kell lennie</li>
                <li>Az automatikus tesztek mock adatokkal dolgoznak</li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2>üîó Hasznos Linkek</h2>
        <ul>
            <li><a href="http://localhost:8000" target="_blank" style="color: #4CAF50;">Alkalmaz√°s (localhost:8000)</a></li>
            <li><a href="TESTING_GENER√ÅL√ÅS.md" target="_blank" style="color: #4CAF50;">Teljes Tesztel√©si Dokument√°ci√≥</a></li>
            <li><a href="README.md" target="_blank" style="color: #4CAF50;">README</a></li>
        </ul>
    </div>

    <script>
        let consoleElement = document.getElementById('console');
        let statusElement = document.getElementById('status');

        function logToConsole(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const colorClass = type === 'success' ? 'log-success' :
                              type === 'error' ? 'log-error' :
                              type === 'warning' ? 'log-warning' : 'log-info';

            const line = document.createElement('div');
            line.className = colorClass;
            line.textContent = `[${timestamp}] ${message}`;
            consoleElement.appendChild(line);
            consoleElement.scrollTop = consoleElement.scrollHeight;
        }

        function clearConsole() {
            consoleElement.innerHTML = '';
            logToConsole('Konzol t√∂r√∂lve', 'info');
        }

        function setStatus(status, type) {
            statusElement.textContent = status;
            statusElement.className = 'status ' + type;
        }

        function openApp() {
            logToConsole('Alkalmaz√°s megnyit√°sa √∫j ablakban...', 'info');
            window.open('http://localhost:8000', '_blank');
        }

        async function runAllTestsInIframe() {
            logToConsole('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê', 'info');
            logToConsole('Tesztek ind√≠t√°sa...', 'info');
            logToConsole('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê', 'info');
            setStatus('Futtat√°s', 'running');

            // Mivel nem tudunk k√∂zvetlen√ºl az iframe-ben futtatni,
            // egy √∫j ablakot nyitunk meg instrukci√≥kkal
            const testInstructions = `
===========================================
AUTOMATIZ√ÅLT TESZTEL√âSI √öTMUTAT√ì
===========================================

1. Nyisd meg a b√∂ng√©sz≈ë konzolt (F12)
2. M√°sold be √©s futtasd ezt a parancsot:

   fetch('/test_console.js')
     .then(r => r.text())
     .then(script => eval(script))
     .then(() => runAllTests());

3. V√°rj, am√≠g az √∂sszes teszt lefut

4. Ellen≈ërizd az eredm√©nyeket a konzolban

===========================================
`;

            logToConsole(testInstructions, 'info');
            logToConsole('üìù Instrukci√≥k megjelen√≠tve', 'success');
            logToConsole('üåê Nyisd meg: http://localhost:8000', 'info');
            logToConsole('üîß Nyisd meg a b√∂ng√©sz≈ë konzolt (F12)', 'info');
            logToConsole('üìã M√°sold be a fenti parancsot', 'info');

            setStatus('V√°rakoz√°s', 'warning');

            // Alternat√≠va: automatikus tesztek szimul√°ci√≥ja
            setTimeout(() => {
                simulateTests();
            }, 2000);
        }

        function simulateTests() {
            logToConsole('', 'info');
            logToConsole('üß™ Tesztek szimul√°l√°sa (Mock Mode)...', 'info');
            logToConsole('', 'info');

            const tests = [
                { name: 'K√∂rnyezet ellen≈ërz√©se', delay: 500, success: true },
                { name: 'Modal megnyit√°sa', delay: 800, success: true },
                { name: 'Modal bez√°r√°sa', delay: 600, success: true },
                { name: 'Input valid√°ci√≥', delay: 700, success: true },
                { name: 'API el√©rhet≈ës√©g', delay: 900, success: true },
                { name: 'Event Listeners', delay: 500, success: true },
                { name: 'Gener√°l√°s folyamat', delay: 1200, success: true }
            ];

            let passed = 0;
            let failed = 0;
            let currentDelay = 0;

            tests.forEach((test, index) => {
                currentDelay += test.delay;
                setTimeout(() => {
                    logToConsole(`üß™ Teszt ${index + 1}: ${test.name}`, 'info');

                    setTimeout(() => {
                        if (test.success) {
                            logToConsole(`  ‚úÖ ${test.name} - SIKERES`, 'success');
                            passed++;
                        } else {
                            logToConsole(`  ‚ùå ${test.name} - SIKERTELEN`, 'error');
                            failed++;
                        }

                        // Ha ez az utols√≥ teszt
                        if (index === tests.length - 1) {
                            setTimeout(() => {
                                logToConsole('', 'info');
                                logToConsole('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê', 'info');
                                logToConsole('üìä TESZT EREDM√âNYEK', 'success');
                                logToConsole('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê', 'info');
                                logToConsole(`‚úÖ Sikeres tesztek: ${passed}`, 'success');
                                logToConsole(`‚ùå Sikertelen tesztek: ${failed}`, failed > 0 ? 'error' : 'info');
                                logToConsole(`üìà Sikeress√©gi ar√°ny: ${Math.round((passed / (passed + failed)) * 100)}%`, 'success');
                                logToConsole('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê', 'info');
                                logToConsole('', 'info');
                                logToConsole('üéâ MINDEN TESZT SIKERES! (Mock Mode)', 'success');
                                logToConsole('', 'info');
                                logToConsole('‚ö†Ô∏è Figyelem: Ez csak szimul√°ci√≥!', 'warning');
                                logToConsole('üìù A val√≥di tesztel√©shez nyisd meg: http://localhost:8000', 'info');

                                setStatus('Szimul√°ci√≥ K√©sz', 'success');
                            }, 500);
                        }
                    }, test.delay / 2);
                }, currentDelay);
            });
        }

        function runIndividualTest(testNumber) {
            logToConsole(`üß™ Teszt ${testNumber} futtat√°sa...`, 'info');
            setStatus(`Teszt ${testNumber} Futtat√°s`, 'running');

            setTimeout(() => {
                logToConsole(`  ‚úÖ Teszt ${testNumber} - SIKERES (Mock Mode)`, 'success');
                setStatus('K√©sz', 'success');
            }, 1000);
        }

        // Kezd≈ë √ºzenet
        window.onload = function() {
            logToConsole('‚úÖ Tesztel√©si k√∂rnyezet bet√∂ltve', 'success');
            logToConsole('üìù V√°laszd ki a tesztel√©si m√≥dot a fenti gombokkal', 'info');
            logToConsole('üí° Javasolt: "√ñsszes Teszt Futtat√°sa"', 'info');
        };
    </script>
</body>
</html>
